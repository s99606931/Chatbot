# 장애 대응 정책

## 1. 장애 관리 체계

### 1.1 장애 등급 정의
```yaml
장애 등급:
  Critical:
    정의:
      - 서비스 완전 중단
      - 데이터 손실/유출
      - 보안 사고
    대응시간: 즉시 (24/7)
    담당: L3 지원팀
    
  Major:
    정의:
      - 주요 기능 장애
      - 성능 심각 저하
      - 부분 서비스 중단
    대응시간: 2시간 이내
    담당: L2 지원팀
    
  Minor:
    정의:
      - 일부 기능 장애
      - 경미한 성능 저하
    대응시간: 4시간 이내
    담당: L1 지원팀
```

### 1.2 대응 조직
```yaml
대응 조직:
  L1 지원팀:
    역할:
      - 초기 장애 접수
      - 기본 장애 처리
      - 에스컬레이션 판단
    구성:
      - 운영자 2명
      - 24/7 교대 근무
      
  L2 지원팀:
    역할:
      - 기술적 장애 처리
      - 원인 분석
      - 해결방안 수립
    구성:
      - 시스템 엔지니어 2명
      - 개발자 1명
      
  L3 지원팀:
    역할:
      - 심각한 장애 처리
      - 시스템 구조적 개선
      - 재발 방지 대책 수립
    구성:
      - 아키텍트 1명
      - 시니어 개발자 1명
```

## 2. 장애 감지 및 알림

### 2.1 모니터링 지표
```yaml
모니터링 항목:
  시스템:
    - CPU/메모리/디스크 사용률
    - GPU 상태 및 사용률
    - 네트워크 상태
    - 프로세스 상태
    
  애플리케이션:
    - API 응답시간
    - 에러율
    - 처리량
    - 세션 상태
    
  데이터베이스:
    - MariaDB 상태
    - 쿼리 성능
    - 연결 상태
    - 디스크 공간
```

### 2.2 알림 설정
```yaml
알림 규칙:
  Critical:
    채널:
      - 전화
      - SMS
      - Slack (@channel)
    대상:
      - 운영팀장
      - 개발팀장
      - 인프라팀장
      
  Major:
    채널:
      - SMS
      - Slack (@here)
    대상:
      - 운영팀
      - 개발팀
      
  Minor:
    채널:
      - Slack
      - Email
    대상:
      - 담당 운영자
```

## 3. 장애 대응 절차

### 3.1 초기 대응
```yaml
초기 대응:
  1단계: 상황 파악
    - 장애 현상 확인
    - 영향도 평가
    - 등급 판정
    
  2단계: 긴급 조치
    - 서비스 재시작
    - 리소스 확보
    - 임시 우회책 적용
    
  3단계: 에스컬레이션
    - 상위 팀 보고
    - 유관 부서 통보
    - 고객 안내
```

### 3.2 장애 해결
```yaml
해결 절차:
  1단계: 원인 분석
    - 로그 분석
    - 모니터링 데이터 검토
    - 이벤트 추적
    
  2단계: 해결 방안 수립
    - 해결책 도출
    - 영향도 평가
    - 실행 계획 수립
    
  3단계: 조치 실행
    - 해결책 적용
    - 정상화 확인
    - 모니터링 강화
```

## 4. 장애 사후 관리

### 4.1 장애 보고
```yaml
보고서 작성:
  기본 정보:
    - 발생 일시
    - 장애 등급
    - 영향 범위
    
  상세 내용:
    - 장애 현상
    - 원인 분석
    - 조치 내용
    - 재발 방지 대책
    
  후속 조치:
    - 시스템 개선 계획
    - 모니터링 강화
    - 운영 프로세스 개선
```

### 4.2 재발 방지
```yaml
개선 활동:
  시스템 개선:
    - 아키텍처 검토
    - 성능 최적화
    - 보안 강화
    
  프로세스 개선:
    - 모니터링 강화
    - 대응 절차 개선
    - 교육 강화
    
  문서화:
    - 장애 사례 DB화
    - 대응 매뉴얼 보완
    - 교육 자료 작성
```

## 5. 용어 설명

### 5.1 장애 관련 용어
- **장애**: 서비스의 정상적인 운영을 방해하는 모든 상황
- **에스컬레이션**: 상위 지원 조직으로 장애 대응을 이관하는 절차
- **RCA**: Root Cause Analysis, 근본 원인 분석

### 5.2 시스템 용어
- **메트릭**: 시스템의 상태를 나타내는 측정값
- **임계치**: 정상과 비정상을 구분하는 기준값
- **페일오버**: 장애 발생 시 예비 시스템으로 전환하는 기능